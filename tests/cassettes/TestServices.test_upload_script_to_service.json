{"recorded_with": "betamax/0.8.0", "http_interactions": [{"response": {"status": {"message": "OK", "code": 200}, "body": {"base64_string": "H4sIAAAAAAAAA5VUTW/bMAz9K4VOGxAl/pbdU7euhwEDNmDDLkMQ0BKdqLGlQJLbFUX++2inMZoi7baDDZMi3yOpRz8yh75vg2eXvx5Z71p2yTYh7PzlYrFFmcJOz7fI5Qa0mUvbLcix8NLu0C+KRtSyaiKeJCXyTKXAKyUjjjIHkSuRYqzmt94aNmNaEfC/JFCsgQ4p+qPe4sU3Z29Rhot3uwcqZ6jiIqAP2qzfU2TA34Ei6csHCD01wT5c//j882Y4c2C8DtqaQ28bvd609ASkUoLrcSK6/vL1+81zjNHxie2XMwbe67VBCjN9285Yh12N7oCo/epgHvGGJpPZ4AcZ9B0e/b1H98Q1FN+BgTVlTQXQF3agh9nXV/XctGwEOcaNKPvZK4TibcJpbmfp/oco/Xtng3mWB8611UDrX6cr3qa7tXKD3ZyS0Ch/lvQ05IpkfG/d1g8yPtf3clSACysFYbpv1eOJXfdyi6S5x4OisyiK0jwRPJYJ8EwUwMtEkKJrkYsEiwoxIq7OKmxXztpBraJKIJU1csosaAuqjJdZ2fBayrqp0yRqZDrUZ6gaI/GY1uRJnKYpcohR8QyLnNdxUfCqqpoqhrSUTcz2M7Zzdk07TRKN5kWSFHlVZYJegu4PlQ5Qt9M8h3k0rb0fOVZjR3GaiUZEktdlQjQQlxwQCq7KHCQ2FaqypOp26DpNuzFuF/04dochHWAdwrRjimTh7MN0g2PgCpQ6nf504rCzd/hCD5IQ6Uy21uCTbo7OyXyOfJL8AvjkzvfL/R8oC9utAgUAAA==", "string": "", "encoding": null}, "headers": {"Allow": "GET, POST, HEAD, OPTIONS", "Transfer-Encoding": "chunked", "Strict-Transport-Security": "max-age=10886400; includeSubDomains", "Vary": "Accept-Encoding", "X-XSS-Protection": "1; mode=block", "X-Frame-Options": "SAMEORIGIN", "Content-Type": "application/json", "Date": "Wed, 14 Mar 2018 16:15:43 GMT", "X-Content-Type-Options": "nosniff", "Server": "nginx/1.12.2", "Content-Encoding": "gzip", "Connection": "keep-alive"}, "url": "<API_URL>/api/scopes.json?status=ACTIVE&name=Bike+Project+%28pykechain+testing%29"}, "recorded_at": "2018-03-14T16:15:43", "request": {"method": "GET", "uri": "<API_URL>/api/scopes.json?status=ACTIVE&name=Bike+Project+%28pykechain+testing%29", "body": {"string": "", "encoding": "utf-8"}, "headers": {"X-Requested-With": "XMLHttpRequest", "Accept-Encoding": "gzip, deflate", "Accept": "*/*", "PyKechain-Version": "2.0.0-rc6", "User-Agent": "python-requests/2.18.4", "Authorization": "Token <AUTH_TOKEN>", "Connection": "keep-alive"}}}, {"response": {"status": {"message": "Created", "code": 201}, "body": {"string": "{\"results\":[{\"id\":\"e3a21678-9eba-4387-a145-f1677a930da2\",\"url\":\"<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2\",\"name\":\"Test upload script to service\",\"description\":\"\",\"scope\":\"6f7bc9f0-228e-4d3a-9dc0-ec5a75d73e1d\",\"script_file_name\":\"\",\"script_type\":\"PYTHON SCRIPT\",\"script_version\":\"1.0\",\"env_version\":\"3.5\",\"permissions\":{\"retrieve_execute\":true,\"update\":true,\"write\":true,\"create\":true,\"destroy\":true,\"read\":true},\"updated_at\":\"2018-03-14T16:15:43.487887Z\"}]}", "encoding": null}, "headers": {"Allow": "GET, POST, HEAD, OPTIONS", "Strict-Transport-Security": "max-age=10886400; includeSubDomains", "Vary": "Accept, Cookie", "X-XSS-Protection": "1; mode=block", "X-Frame-Options": "SAMEORIGIN", "Content-Type": "application/json", "Date": "Wed, 14 Mar 2018 16:15:43 GMT", "X-Content-Type-Options": "nosniff", "Server": "nginx/1.12.2", "Content-Length": "495", "Connection": "keep-alive", "Location": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2"}, "url": "<API_URL>/api/services.json"}, "recorded_at": "2018-03-14T16:15:43", "request": {"method": "POST", "uri": "<API_URL>/api/services.json", "body": {"string": "scope=6f7bc9f0-228e-4d3a-9dc0-ec5a75d73e1d&env_version=3.5&script_type=PYTHON+SCRIPT&name=Test+upload+script+to+service", "encoding": "utf-8"}, "headers": {"X-Requested-With": "XMLHttpRequest", "Accept-Encoding": "gzip, deflate", "Accept": "*/*", "PyKechain-Version": "2.0.0-rc6", "Content-Type": "application/x-www-form-urlencoded", "User-Agent": "python-requests/2.18.4", "Authorization": "Token <AUTH_TOKEN>", "Connection": "keep-alive", "Content-Length": "119"}}}, {"response": {"status": {"message": "OK", "code": 200}, "body": {"base64_string": "H4sIAAAAAAAAA42QwW6DMBBEfwX5XAPGEAPXXtpLG7Vc2qpCjr0oVggg29BGUf69G5KIHHvzvpmdkfdILLix9Y6UX0diNCkJcJmwlchpARtJU54LKlma0QahkAWPtUzIAxlti+at94Mro2gHisvBhDugaitNF6p+HyGIHNjJKHDRP2M7uQfMrcD5YBzaXurAKWsGH/g+uIahTcOFmr5DNwKn+uG8uGrERhVNTJMkB5pqLmmhVUxBZVJkWnBgeraft+vGtFBfKxfqD3PU+qN6en0J3h/fntfVok5g3aWWhTFi6KY7xsMM2QB2b9wZ4WGPeGNvDUxQwy+o0WO4tyPgDQctl+nHmmVQFmapka2D+b/e9oebiqK+vE+3FF1Lj/1JzHIac8rSiq1KlpUpD9Nc5Ln4JKfv0x89XHXM8AEAAA==", "string": "", "encoding": null}, "headers": {"Allow": "GET, PUT, PATCH, DELETE, HEAD, OPTIONS", "Transfer-Encoding": "chunked", "Strict-Transport-Security": "max-age=10886400; includeSubDomains", "Vary": "Accept-Encoding", "X-XSS-Protection": "1; mode=block", "X-Frame-Options": "SAMEORIGIN", "Content-Type": "application/json", "Date": "Wed, 14 Mar 2018 16:15:43 GMT", "X-Content-Type-Options": "nosniff", "Server": "nginx/1.12.2", "Content-Encoding": "gzip", "Connection": "keep-alive"}, "url": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2"}, "recorded_at": "2018-03-14T16:15:43", "request": {"method": "GET", "uri": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2", "body": {"string": "", "encoding": "utf-8"}, "headers": {"X-Requested-With": "XMLHttpRequest", "Accept-Encoding": "gzip, deflate", "Accept": "*/*", "PyKechain-Version": "2.0.0-rc6", "User-Agent": "python-requests/2.18.4", "Authorization": "Token <AUTH_TOKEN>", "Connection": "keep-alive"}}}, {"response": {"status": {"message": "Accepted", "code": 202}, "body": {"string": "{\"results\":[{\"id\":\"e3a21678-9eba-4387-a145-f1677a930da2\",\"url\":\"<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2\",\"name\":\"Test upload script to service\",\"description\":\"\",\"scope\":\"6f7bc9f0-228e-4d3a-9dc0-ec5a75d73e1d\",\"script_file_name\":\"test_upload_script.py\",\"script_type\":\"PYTHON SCRIPT\",\"script_version\":\"1.0\",\"env_version\":\"3.5\",\"permissions\":{\"update\":true,\"destroy\":true,\"read\":true,\"create\":false,\"write\":true,\"retrieve_execute\":true}}]}", "encoding": null}, "headers": {"Allow": "POST, OPTIONS", "Strict-Transport-Security": "max-age=10886400; includeSubDomains", "Vary": "Accept, Cookie", "X-XSS-Protection": "1; mode=block", "X-Frame-Options": "SAMEORIGIN", "Content-Type": "application/json", "Date": "Wed, 14 Mar 2018 16:15:43 GMT", "X-Content-Type-Options": "nosniff", "Server": "nginx/1.12.2", "Content-Length": "474", "Connection": "keep-alive"}, "url": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2/upload"}, "recorded_at": "2018-03-14T16:15:43", "request": {"method": "POST", "uri": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2/upload", "body": {"string": "--993f1c43b70149ed8f6d498f7d63b5ff\r\nContent-Disposition: form-data; name=\"attachment\"; filename=\"test_upload_script.py\"\r\n\r\n#!/usr/bin/env python\n\n\"\"\"\nDebugging script returning the environment etc\n\"\"\"\n\nimport os\nimport platform\nimport sys\nimport time\nfrom pprint import pprint\n\n\ndef main(*args, **kwargs):\n    start = time.time()\n    foo, bar = \"cow says\", \"moo!\"\n    print('>>> starting on {}'.format(time.strftime('%c', time.gmtime(start))))\n    print('--- arguments: {}'.format(args))\n    print('--- keyword arguments: {}'.format(kwargs))\n    print('--- local variables dict: {}'.format(dir()))\n    pprint('--- environment: {}'.format(os.environ), width=120)\n    pprint('--- platform details (uname): {}'.format(platform.uname()), width=120)\n    pprint('--- python paths: {}'.format(sys.path), width=120)\n    mark_1 = time.time()\n    print('<<< intermediate timing on {}, duration: {}'.format(time.strftime('%c', time.gmtime(mark_1)), mark_1 - start))\n    print('--- python pip packages installed \\n{}'.format(os.popen('pip freeze').readlines()))\n    try:\n        import pykechain\n        print('--- importing pykechain version: {}'.format(pykechain.version))\n    except ImportError:\n        print('/!\\ pykechain is not installed, please install pykechain version 1.12 or later')\n\n    mark_2 = time.time()\n\n    from envparse import env\n    if not env('KECHAIN_URL', None) or not env('KECHAIN_TOKEN', None) or not env('KECHAIN_SCOPE_ID', None):\n        print('/!\\ cannot interact using pykechain as environment variables KECHAIN_URL, KECHAIN_TOKEN and '\n              'KECHAIN_SCOPE_ID are not set')\n    else:\n        project = pykechain.get_project()\n        mark_3 = time.time()\n        print(\"--- retrieving project '{}' from kechain (url: {})\".format(project.name, env('KECHAIN_URL')))\n        print(\"--- {} activities, {} parts\".format(len(project.activities()), len(project.parts())))\n        print(\"--- retrieving as user: '{}\".format(env('KECHAIN_USERNAME')))\n        print(\"<<< interaction with ke-chain took: {}s\".format(mark_3-mark_2))\n\n    end = time.time()\n    print('<<< ending on {}, duration: {}'.format(time.strftime('%c', time.gmtime(end)), end - start))\n\n\nif __name__ == '__main__':\n    sys.exit(main())\n\r\n--993f1c43b70149ed8f6d498f7d63b5ff--\r\n", "encoding": "utf-8"}, "headers": {"X-Requested-With": "XMLHttpRequest", "Accept-Encoding": "gzip, deflate", "Accept": "*/*", "PyKechain-Version": "2.0.0-rc6", "Content-Type": "multipart/form-data; boundary=993f1c43b70149ed8f6d498f7d63b5ff", "User-Agent": "python-requests/2.18.4", "Authorization": "Token <AUTH_TOKEN>", "Connection": "keep-alive", "Content-Length": "2265"}}}, {"response": {"status": {"message": "OK", "code": 200}, "body": {"base64_string": "H4sIAAAAAAAAA42Qy27DIBREf8ViHWwwfm+7aTdt1HrTVpVF4FpB8QMBdhtF+ffiOFG67I45d+4McEIG7NQ5i6rPE1ISVQgYj2mWF7iEHccJK3LMaZLi1sOcl4xIHqMNmkznzXvntK2i6ACCca3CA2Cx52oIxdhHHkQWzKwE2OifsQPvwefWYF0w6W7kMrDCKO0CNwbXMG+TsFI1Dt7tgRWjXhazNt+JsiU4jgvAiWQcl1IQDCLleSpzBlRe7Mt206oOmmul85XNWtms41Af71Z3vORv3+vHl+fg7eH1aVvfpzMYu96FhsRjGOY/jIWpZxpMr+yC/G+f0KQldz7SmQkuD3JmPN6kAS5vZ+HFYmx5Z738Nuq+ZsAZBTM08ANiuvHz5pouG+58f0xogQnDNKlpVtG0SliYJWlOyAc6f51/AbjKzcwFAgAA", "string": "", "encoding": null}, "headers": {"Allow": "GET, PUT, PATCH, DELETE, HEAD, OPTIONS", "Transfer-Encoding": "chunked", "Strict-Transport-Security": "max-age=10886400; includeSubDomains", "Vary": "Accept-Encoding", "X-XSS-Protection": "1; mode=block", "X-Frame-Options": "SAMEORIGIN", "Content-Type": "application/json", "Date": "Wed, 14 Mar 2018 16:15:43 GMT", "X-Content-Type-Options": "nosniff", "Server": "nginx/1.12.2", "Content-Encoding": "gzip", "Connection": "keep-alive"}, "url": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2"}, "recorded_at": "2018-03-14T16:15:43", "request": {"method": "GET", "uri": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2", "body": {"string": "", "encoding": "utf-8"}, "headers": {"X-Requested-With": "XMLHttpRequest", "Accept-Encoding": "gzip, deflate", "Accept": "*/*", "PyKechain-Version": "2.0.0-rc6", "User-Agent": "python-requests/2.18.4", "Authorization": "Token <AUTH_TOKEN>", "Connection": "keep-alive"}}}, {"response": {"status": {"message": "No Content", "code": 204}, "body": {"string": "", "encoding": null}, "headers": {"Allow": "GET, PUT, PATCH, DELETE, HEAD, OPTIONS", "Strict-Transport-Security": "max-age=10886400; includeSubDomains", "Vary": "Accept, Cookie", "X-XSS-Protection": "1; mode=block", "X-Frame-Options": "SAMEORIGIN", "Content-Type": "application/json", "Date": "Wed, 14 Mar 2018 16:15:43 GMT", "X-Content-Type-Options": "nosniff", "Server": "nginx/1.12.2", "Content-Length": "14", "Connection": "keep-alive"}, "url": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2.json"}, "recorded_at": "2018-03-14T16:15:43", "request": {"method": "DELETE", "uri": "<API_URL>/api/services/e3a21678-9eba-4387-a145-f1677a930da2.json", "body": {"string": "", "encoding": "utf-8"}, "headers": {"X-Requested-With": "XMLHttpRequest", "Accept-Encoding": "gzip, deflate", "Accept": "*/*", "PyKechain-Version": "2.0.0-rc6", "User-Agent": "python-requests/2.18.4", "Authorization": "Token <AUTH_TOKEN>", "Connection": "keep-alive", "Content-Length": "0"}}}]}